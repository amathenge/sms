{% from 'utils.j2' import nav %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <script>
      function checkData(theForm) {
        var pwd = document.querySelector("#txtPassword").value;
        var chkpwd = document.querySelector("#txtChkpass").value;
        var pwdmatch = document.querySelector("#pwdMatch")
        if (pwd != chkpwd) {
            pwdmatch.innerHTML = "Passwords Don't Match";
            return false;
        }
        return true;
      }
    </script>


    <title>Fair Acres - Edit Staff</title>
  </head>
  <body>
    <div class="container m-3">
      <h1 class="display-4">Fair Acres - Staff Editor</h1>
      <div>Logged in as: <span class="fw-bold">{{ session['user'] }}</span> </div>
      <div class="row">
        <div class="col-12 border border-secondary">
            {{ nav(session['user'], session['admin']) }}
        </div>
      </div>


      <div class="row">
        <span class="text-secondary">Edit Staff</span>
      </div>
      <div class="row">
        <form class="col-8 p-3 border border-secondary" action="{{ url_for('edituser', uid=contact.id) }}" onsubmit="return checkData(this)" method="POST">
            <div class="row">
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtUser">Username</label>
                        <input class="form-control" type="text" id="txtUser" name="txtUser" maxlength="20" value="{{ contact.username }}" disabled>
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtID">Username</label>
                        <input class="form-control" type="text" id="txtID" name="txtID" maxlength="20" value="{{ contact.id }}" disabled>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtFirst">First Name</label>
                        <input class="form-control" type="text" id="txtFirst" name="txtFirst" placeholder="First Name" maxlength="20" value="{{ contact.firstname }}">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtLast">Last Name</label>
                        <input class="form-control" type="text" id="txtLast" name="txtLast" placeholder="Last Name" maxlength="20" value="{{ contact.lastname }}">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtEmail">Email</label>
                        <input class="form-control" type="email" id="txtEmail" name="txtEmail" placeholder="user@email.com" maxlength="20" value="{{ contact.email }}">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtAdmin">Admin (Y/N)</label>
                        <select class="form-control" id="txtAdmin" name="txtAdmin">
                            {% if contact.admin == 1 %}
                            <option value="0">N</option>
                            <option value="1" selected>Y</option>
                            {% else %}
                            <option value="0" selected>N</option>
                            <option value="1">Y</option>
                            {% endif %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtPassword">Change Password</label>
                        <input class="form-control" type="password" id="txtPassword" name="txtPassword" placeholder="Password" maxlength="20">
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group my-2">
                        <label for="txtChkpass">Repeat Password</label>&nbsp;&nbsp;<span id="pwdMatch"></span>
                        <input class="form-control" type="text" id="txtChkpass" name="txtChkpass" placeholder="Repeat Password" maxlength="20">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                <div class="form-group my-2">
                    <button class="btn btn-primary" type="submit">SAVE USER</button>
                </div>
                </div>
            </div>
        </form>
      </div>
    </div>


    <!-- Optional JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
